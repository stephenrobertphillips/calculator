<!DOCTYPE html>
<html>
<head>
  <title>Voltage Drop & Fuse Calculator</title>
</head>
<body>
  <h2>Voltage Drop & Fuse Calculator</h2>
  
  <label>System Voltage (V): <input type="number" id="voltage" value="12"></label><br><br>
  <label>Load Current (A): <input type="number" id="current" value="30"></label><br><br>
  <label>Round-Trip Cable Length (m): <input type="number" id="length" value="10"></label><br><br>
  <label>Selected Cable Size (mm²): 
    <select id="cableSize">
      <option value="2.5">2.5</option>
      <option value="4">4</option>
      <option value="6">6</option>
      <option value="10">10</option>
      <option value="16">16</option>
      <option value="25">25</option>
    </select>
  </label><br><br>

  <button onclick="calculate()">Calculate</button>

  <h3>Results</h3>
  <p id="voltageDrop">Voltage Drop: </p>
  <p id="dropPercent">Voltage Drop (%): </p>
  <p id="fuseSuggestion">Recommended Fuse: </p>
  <p id="recommendedCable">Recommended Minimum Cable Size: </p>

  <script>
    function calculate() {
      const V = parseFloat(document.getElementById("voltage").value);
      const I = parseFloat(document.getElementById("current").value);
      const L = parseFloat(document.getElementById("length").value);
      const A = parseFloat(document.getElementById("cableSize").value);

      const resistivity = 0.0175; // Copper ohm·mm²/m
      const R = (resistivity * L * 2) / A; // Ohms
      const Vdrop = I * R; // Volts
      const percentDrop = (Vdrop / V) * 100;

      // Fuse recommendation
      let fuse;
      if (I <= 25) fuse = "Blade Fuse: 25A";
      else if (I <= 40) fuse = "MIDI Fuse: 40A";
      else if (I <= 60) fuse = "MIDI Fuse: 60A";
      else if (I <= 100) fuse = "MIDI Fuse: 100A";
      else if (I <= 180) fuse = "MIDI Fuse: 180A";
      else if (I <= 600) fuse = "MEGA Fuse: 600A";
      else fuse = "Type 3 High Current Fuse (custom)";

      // Recommend minimum cable size
      const sizes = [2.5, 4, 6, 10, 16, 25];
      let recommendedSize = "N/A";
      for (let size of sizes) {
        const rTest = (resistivity * L * 2) / size;
        const vDropTest = I * rTest;
        const percentTest = (vDropTest / V) * 100;
        if (percentTest <= 3) {
          recommendedSize = `${size} mm²`;
          break;
        }
      }

      // Output
      document.getElementById("voltageDrop").innerText = `Voltage Drop: ${Vdrop.toFixed(2)} V`;
      document.getElementById("dropPercent").innerText = `Voltage Drop (%): ${percentDrop.toFixed(2)} %`;
      document.getElementById("fuseSuggestion").innerText = `Recommended Fuse: ${fuse}`;
      document.getElementById("recommendedCable").innerText = `Recommended Minimum Cable Size: ${recommendedSize}`;
    }
  </script>
</body>
</html>